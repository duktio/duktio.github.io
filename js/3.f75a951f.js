(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{2678:function(t,e,a){},"495c":function(t,e,a){},b6f2:function(t,e,a){"use strict";var s=a("495c"),n=a.n(s);n.a},c04f:function(t,e,a){"use strict";var s=a("2678"),n=a.n(s);n.a},df45:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-card",[a("q-card-section",{staticClass:"bg-primary text-white"},[a("q-item",{staticClass:"bg-primary text-white",attrs:{dark:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{size:"lg",name:t.icon}})],1),a("q-item-section",[a("q-item-label",{staticClass:"text-h6"},[t._v(t._s(t.title))]),a("q-item-label",{staticClass:"text-subtitle2"},[t._v(t._s(t.subtitle))])],1),t.menuEnabled?a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{color:"white",flat:"",icon:"more_vert"}},[a("q-menu",{attrs:{"auto-close":"","max-width":"300px"}},[t._t("menu")],2)],1)],1):t._e()],1)],1),t.contentEnabled?a("q-separator"):t._e(),t.contentEnabled?a("q-card-actions",{attrs:{align:"right"}},[t._t("default")],2):t._e()],1),t.title!==t.$auth.user.name?a("q-card",{staticClass:"q-mt-lg",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("q-item",{staticClass:"text-grey-5",attrs:{dark:"",clickable:"",to:"/me"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{size:"lg",name:"face"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"text-h6"},[t._v(t._s(t.$auth.user.name))]),a("q-item-label",{staticClass:"text-subtitle2"},[t._v(t._s(t.$auth.user.email))])],1)],1)],1)],1):t._e()],1)])},n=[],i=a("ded3"),o=a.n(i),l=a("2f62"),c={name:"SideNavigationBar",components:{},props:["icon","title","subtitle","contentEnabled","menuEnabled"],data(){return{}},computed:o()({},Object(l["c"])("namespaces",["namespaces"])),methods:{loadNamespaces(){return this.$store.dispatch("namespaces/getNamespaces")},logout(){this.$auth.logout({returnTo:"/"})}}},r=c,m=(a("b6f2"),a("2877")),d=a("f09f"),u=a("a370"),h=a("66e5"),p=a("4074"),g=a("0016"),b=a("0170"),f=a("9c40"),v=a("4e73"),w=a("eb85"),q=a("4b7e"),y=a("ead5"),C=a("eebe"),k=a.n(C),_=Object(m["a"])(r,s,n,!1,null,null,null);e["a"]=_.exports;k()(_,"components",{QCard:d["a"],QCardSection:u["a"],QItem:h["a"],QItemSection:p["a"],QIcon:g["a"],QItemLabel:b["a"],QBtn:f["a"],QMenu:v["a"],QSeparator:w["a"],QCardActions:q["a"],QBreadcrumbs:y["a"]})},f5df4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"fit",attrs:{padding:!1}},[a("div",{staticClass:"row window-height"},[a("div",{staticClass:"col-3 q-pa-lg"},[a("side-navigation-bar",{attrs:{title:t.namespace.name,subtitle:t.namespace.summary,icon:"amp_stories","menu-enabled":!0,"content-enabled":!0}},[a("template",{slot:"default"},[a("div",{staticClass:"col-grow"},[a("q-btn-group",{attrs:{spread:"",unelevated:""}},[a("q-btn",{attrs:{stack:"",icon:"add"},on:{click:t.createFlow}},[t._v("Flow")]),a("q-btn",{attrs:{stack:"",icon:"add"},on:{click:t.createAgent}},[t._v("Agent")])],1)],1)]),a("template",{slot:"menu"},[a("q-list",[a("q-item",{staticClass:"q-my-sm",attrs:{clickable:""},on:{click:t.removeNamespace}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{size:"md",name:"delete",color:"negative"}})],1),a("q-item-section",[a("q-item-label",[t._v("Remove")]),a("q-item-label",{attrs:{caption:""}},[t._v("Remove the namespace and everything within.")])],1)],1)],1)],1)],2)],1),a("div",{staticClass:"col-grow q-pa-lg"},[a("q-toolbar",[a("q-tabs",{attrs:{"active-color":"black"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"flows",label:"Flows"}}),a("q-tab",{attrs:{name:"agents",label:"Agents"}})],1)],1),a("q-tab-panels",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"flows"}},[a("FlowList",{attrs:{flows:t.flows},on:{select:t.gotoFlow,create:t.createFlow,remove:t.removeFlow}})],1),a("q-tab-panel",{attrs:{name:"agents"}},[a("AgentList",{attrs:{agents:t.agents},on:{create:t.createAgent,remove:t.removeAgent}})],1)],1)],1)])])},n=[],i=(a("e6cf"),a("ddb0"),a("ded3")),o=a.n(i),l=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{attrs:{flat:"",data:t.flows.items,columns:t.columns,"row-key":"name","no-data-label":"I didn't find any flows for you"},on:{"row-click":t.onRowSelected},scopedSlots:t._u([{key:"header-cell-actions",fn:function(){return[a("q-th",{staticClass:"text-right",attrs:{"auto-width":""}},[a("q-btn",{attrs:{unelevated:"",stretch:"",size:"md",color:"black"},on:{click:function(e){return t.$emit("create")}}},[t._v("CREATE")])],1)]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[a("q-td",{attrs:{"auto-width":"",props:t}})]}}])})},r=[],m={name:"FlowList",components:{},props:["flows"],data(){return{columns:[{name:"name",align:"left",label:"Name",field:"name",sortable:!0,style:"width: 300px"},{name:"summary",align:"left",label:"Summary",field:"summary",sortable:!1},{name:"actions",align:"right",label:"Actions",sortable:!1,style:"width: 300px"}]}},methods:{onRowSelected(t,e){this.$emit("select",e)}}},d=m,u=a("2877"),h=a("eaac"),p=a("357e"),g=a("9c40"),b=a("db86"),f=a("eebe"),v=a.n(f),w=Object(u["a"])(d,c,r,!1,null,null,null),q=w.exports;v()(w,"components",{QTable:h["a"],QTh:p["a"],QBtn:g["a"],QTd:b["a"]});var y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin",staticStyle:{width:"50vw","max-width":"1000px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-5 bg-black text-white q-pa-lg",staticStyle:{"min-height":"500px"}},[a("span",{staticClass:"text-h5"},[t._v("New Flow")]),a("p",{staticClass:"q-mt-lg"},[t._v("\n          A flow is a collection of tasks which can be triggered for execution. Transitions explain how to traverse\n          from one task to the next, effectively forming a Directed Acyclic Graph (DAG).\n        ")])]),a("div",{staticClass:"column col-grow justify-between"},[a("div",[a("q-list",{staticClass:"q-pa-lg"},[a("q-item",[a("q-item-section",[a("q-item-label",{staticClass:"text-h6"},[t._v("Name")]),a("q-item-label",{attrs:{caption:""}},[t._v("What should be the name of your new flow?")])],1)],1),a("q-item",{staticClass:"q-pt-none"},[a("q-item-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{outlined:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("q-item",[a("q-item-section",[a("q-item-label",{staticClass:"text-h6"},[t._v("Summary")]),a("q-item-label",{attrs:{caption:""}},[t._v("Explain in one line what your flow is all about.")])],1)],1),a("q-item",{staticClass:"q-pt-none"},[a("q-item-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{outlined:""},model:{value:t.summary,callback:function(e){t.summary=e},expression:"summary"}})],1)],1)],1)],1),a("div",{staticClass:"q-pa-lg"},[a("q-space"),a("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:t.onCancelClick}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{unelevated:"",color:"primary",label:"Create"},on:{click:t.onOKClick}})],1)])])])],1)},C=[],k={name:"FlowCreateDialog",props:["value"],data(){return{step:1,name:"",summary:""}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){const t={name:this.name,summary:this.summary,tasks:{},transitions:[]};this.$emit("ok",t),this.step=1,this.name="",this.summary=""},onCancelClick(){this.hide()}},computed:{}},_=k,x=a("24e8"),$=a("f09f"),Q=a("1c1c"),A=a("66e5"),O=a("4074"),S=a("0170"),D=a("27f9"),F=a("2c91"),E=Object(u["a"])(_,y,C,!1,null,null,null),T=E.exports;v()(E,"components",{QDialog:x["a"],QCard:$["a"],QList:Q["a"],QItem:A["a"],QItemSection:O["a"],QItemLabel:S["a"],QInput:D["a"],QSpace:F["a"],QBtn:g["a"]});var j=a("a18c"),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{attrs:{flat:"",data:t.agents.items,columns:t.columns,"row-key":"name"},on:{"row-click":t.onRowSelected},scopedSlots:t._u([{key:"header-cell-actions",fn:function(){return[a("q-th",{staticClass:"text-right",attrs:{"auto-width":""}},[a("q-btn",{attrs:{unelevated:"",stretch:"",size:"md",color:"black"},on:{click:function(e){return t.$emit("create")}}},[t._v("CREATE")])],1)]},proxy:!0},{key:"body-cell-created_at",fn:function(e){return[a("q-td",[t._v("\n        "+t._s(t._f("moment")(e.row.created_at,"from","now"))+"\n      ")])]}},{key:"body-cell-actions",fn:function(e){return[a("q-td",{attrs:{"auto-width":"",props:e}},[a("q-btn",{attrs:{flat:"",icon:"visibility",color:"primary"},nativeOn:{click:function(a){return t.viewAgent(e.row)}}}),a("q-btn",{attrs:{flat:"",icon:"delete_outline",color:"negative"},nativeOn:{click:function(a){return t.removeAgent(e.row)}}})],1)]}}])})},N=[],R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin",staticStyle:{width:"50vw","max-width":"1000px"}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v(t._s(t.agent.public_key))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",[a("ol",[a("li",[a("span",{staticClass:"text-subtitle2"},[t._v("Download the credentials file")]),a("div",[a("p",[t._v("The first step involves downloading the credentials file and saving it to a location accessible from the agent.")]),a("q-btn",{staticClass:"q-mb-md",attrs:{color:"primary"},on:{click:t.onCredsDownload}},[t._v("Download Credentials File")])],1)]),a("li",[a("span",{staticClass:"text-subtitle2"},[t._v("Run the agent")]),a("div",[a("p",[t._v("Point the agent to the correct credentials file")]),a("pre",[t._v("dukt-agent k8s --config "+t._s(t.agent.publicKey)+".creds")])])]),a("li",[a("span",{staticClass:"text-subtitle2"},[t._v("Validate the agent is running")]),a("div",[a("p",[t._v('\n              Once the agent is running, it might take a minute or so to see the "last updated" field being changed in the ui.\n              If this is not the case, validate the output of the dukt-agent command or reach out to us.\n            ')])])])])])],1)],1)},L=[],B=a("a357"),K={name:"AgentDetailDialog",props:["value","agent"],data(){return{step:1,name:"",summary:""}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onCredsDownload(){Object(B["a"])(this.agent.public_key+".creds",this.creds)},onOKClick(){const t={name:this.name,summary:this.summary};this.$store.dispatch("namespaces/create",t).then((t=>{this.$emit("ok",t.data),this.hide(),this.step=1,this.name="",this.summary=""}))},onCancelClick(){this.hide()}},computed:{creds(){return window.atob(this.agent.creds)}}},H=K,P=a("a370"),z=a("7f67"),G=Object(u["a"])(H,R,L,!1,null,null,null),J=G.exports;v()(G,"components",{QDialog:x["a"],QCard:$["a"],QCardSection:P["a"],QSpace:F["a"],QBtn:g["a"]}),v()(G,"directives",{ClosePopup:z["a"]});var M={name:"AgentList",components:{},props:["agents"],data(){return{columns:[{name:"key",align:"left",label:"Key",field:"public_key",sortable:!0},{name:"created_at",align:"left",label:"Created",field:"created_at",sortable:!1,style:"width: 100px"},{name:"last_seen_at",align:"left",label:"Last Seen",field:"last_seen_at",sortable:!1,style:"width: 100px"},{name:"actions",align:"right",label:"Actions",sortable:!1,style:"width: 300px"}]}},methods:{onRowSelected(t,e){this.$emit("select",e)},viewAgent(t){this.$q.dialog({component:J,parent:this,agent:t})},removeAgent(t){this.$emit("remove",t)}}},V=M,W=(a("c04f"),Object(u["a"])(V,I,N,!1,null,"55c97bac",null)),U=W.exports;v()(W,"components",{QTable:h["a"],QTh:p["a"],QBtn:g["a"],QTd:b["a"]});var X=a("df45"),Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin",staticStyle:{width:"50vw","max-width":"1000px"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-5 bg-black text-white q-pa-lg",staticStyle:{"min-height":"500px"}},[a("span",{staticClass:"text-h5"},[t._v("New Agent")]),a("p",{staticClass:"q-mt-lg"},[t._v("\n          An agent represents the process running on your side of the fence. It connects your environment with dukt and allows\n          for flows to be scheduled.\n        ")]),a("p",{staticClass:"q-mt-lg"},[t._v("\n          An agent needs information to identify with dukt, so you will need to pass some credentials when starting your agent.\n          These credentials are available in the form of a credential file, which can be downloaded once the agent has been\n          created in the dukt platform.\n        ")])]),a("div",{staticClass:"column col-7 justify-center text-center"},[a("div",{staticClass:"column"},[a("div",[a("q-btn",{staticClass:"q-ml-sm",attrs:{unelevated:"",color:"primary",label:"Create"},on:{click:t.onOKClick}}),a("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:t.onCancelClick}})],1)])])])])],1)},Z=[],tt={name:"NamespaceCreateDialog",props:["value"],data(){return{step:1,name:"",summary:""}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){this.$emit("ok",{}),this.hide()},onCancelClick(){this.hide()}},computed:{}},et=tt,at=Object(u["a"])(et,Y,Z,!1,null,null,null),st=at.exports;v()(at,"components",{QDialog:x["a"],QCard:$["a"],QBtn:g["a"]});var nt={name:"Namespace",components:{SideNavigationBar:X["a"],AgentList:U,FlowList:q},computed:o()(o()(o()({},Object(l["c"])("flows",["flows"])),Object(l["c"])("namespaces",["namespace"])),Object(l["c"])("agents",["agents"])),data(){return{tab:"flows"}},methods:{gotoFlow(t){Object(j["b"])(this,t._key)},createAgent(){const t=this.namespace._key,e=this;this.$q.dialog({component:st,parent:this}).onOk((a=>(e.tab="agents",e.$store.dispatch("agents/create",{nk:t}).then((a=>e.$store.dispatch("agents/getAgents",{nk:t}))))))},removeAgent(t){const e=this.namespace._key,a=t;this.$q.dialog({title:"Confirm",message:`Are you sure you want to remove agent ${a.public_key}?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("agents/remove",{nk:e,ak:a.public_key}).then((()=>{this.$q.notify({type:"positive",message:"Removed agent "+a.public_key})}))}))},createFlow(){const t=this.namespace._key,e=this;this.$q.dialog({component:T,parent:this}).onOk((a=>this.$store.dispatch("flows/createFlow",{nk:t,flow:a}).then((t=>Object(j["b"])(e,t._key)))))},removeFlow(t){const e=t;this.$q.dialog({title:"Confirm",message:`Are you sure you want to remove the ${e.name} flow?`,cancel:!0,persistent:!0}).onOk((()=>{this.$store.dispatch("flows/removeFlow",e._key).then((()=>{this.$q.notify({type:"positive",message:`Removed the ${e.name} flow.`})}))}))},removeNamespace(){const t=this,e=this.namespace;this.$q.dialog({title:"Confirm",message:`Are you sure you want to remove the ${e.name} namespace?`,cancel:!0,persistent:!0}).onOk((()=>{t.$store.dispatch("namespaces/remove",e._key).then((()=>{t.$q.notify({type:"positive",message:`Removed the ${e.name} namespace.`}),t.$router.push("/me")}))}))}},preFetch({store:t,currentRoute:e}){const a="_system*namespaces:"+e.params.ns;return Promise.all([t.dispatch("namespaces/getNamespace",a),t.dispatch("flows/getFlows",a),t.dispatch("agents/getAgents",{nk:a})]).then((e=>t.commit("navigation/set",{types:["namespaces"],items:[e[0]]})))}},it=nt,ot=a("9989"),lt=a("e7a9"),ct=a("0016"),rt=a("65c6"),mt=a("429b"),dt=a("7460"),ut=a("adad"),ht=a("823b"),pt=Object(u["a"])(it,s,n,!1,null,null,null);e["default"]=pt.exports;v()(pt,"components",{QPage:ot["a"],QBtnGroup:lt["a"],QBtn:g["a"],QList:Q["a"],QItem:A["a"],QItemSection:O["a"],QIcon:ct["a"],QItemLabel:S["a"],QToolbar:rt["a"],QTabs:mt["a"],QTab:dt["a"],QTabPanels:ut["a"],QTabPanel:ht["a"]})}}]);